<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>多账号管理器</title>
    <link rel="stylesheet" href="popup.css" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
  </head>
  <body>
    <div class="app">
      <header class="app-header">
        <div class="header-content">
          <div class="app-title">
            <div class="app-title-link">
              <img src="icons/icon.svg" alt="Logo" class="app-logo" />
              <span class="app-name" data-i18n="appName">多账号管理器</span>
            </div>
            <span class="app-version" id="app-version">v0.1.0</span>
          </div>
          <div class="app-controls">
            <button id="btn-share" class="btn-icon-only" data-i18n-title="share">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-share-2"><circle cx="18" cy="5" r="3"/><circle cx="6" cy="12" r="3"/><circle cx="18" cy="19" r="3"/><line x1="8.59" y1="13.51" x2="15.42" y2="17.49"/><line x1="15.41" y1="6.51" x2="8.59" y2="10.49"/></svg>
            </button>
            <button id="btn-feedback" class="btn-icon-only" data-i18n-title="feedback">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-message-square-plus"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/><line x1="9" y1="10" x2="15" y2="10"/><line x1="12" y1="7" x2="12" y2="13"/></svg>
            </button>
            <button id="btn-settings" class="btn-icon-only" data-i18n-title="settings">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-settings-2"><path d="M20 7h-9"/><path d="M14 17H5"/><circle cx="17" cy="17" r="3"/><circle cx="7" cy="7" r="3"/></svg>
            </button>
          </div>
        </div>
      </header>
      
      <!-- Top Ad Container -->
      <div id="ad-top-container" class="ad-top-container hidden"></div>

      <main class="app-main" id="app-main">
        <aside class="sidebar" id="sidebar">
          <div class="sidebar-header">
            <span class="sidebar-title" data-i18n="siteList">网站列表</span>
          </div>
          <ul id="site-list" class="site-list"></ul>
          <div id="site-empty" class="empty-state sidebar-empty">
            <div class="empty-icon">📂</div>
            <p data-i18n="noSites">暂无网站</p>
          </div>
        </aside>

        <section class="content-panel" id="view-home">
          <div class="content-header">
            <div class="site-info">
              <h2 id="current-site-name" class="site-title" data-i18n="selectSite">请选择网站</h2>
              <span id="current-site-host" class="site-hostname"></span>
            </div>
            <div class="header-actions">
               <button id="btn-import-share" class="btn btn-outline btn-icon" data-i18n-title="importShareTitle">
                 <span class="icon">
                   <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
                 </span> <span data-i18n="import">导入</span>
               </button>
               <input type="file" id="input-import-share" accept=".json" hidden />
               
               <button id="btn-clear-data" class="btn btn-warning btn-icon hidden" data-i18n-title="logoutTitle">
                 <span class="icon">
                   <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18.36 6.64a9 9 0 1 1-12.73 0"></path><line x1="12" y1="2" x2="12" y2="12"></line></svg>
                 </span> <span data-i18n="logout">退出</span>
               </button>
               <button id="btn-add-account" class="btn btn-primary btn-icon">
                 <span class="icon">+</span> <span data-i18n="add">添加</span>
               </button>
            </div>
          </div>

          <div id="account-list" class="account-list"></div>
          
          <div id="account-empty" class="empty-state content-empty">
            <div class="empty-illustration">👻</div>
            <p data-i18n="noAccounts">当前站点没有保存的账号</p>
            <p class="empty-sub" data-i18n="addAccountHint">点击右上角“添加账号”立即开始</p>
          </div>
        </section>

        <section class="content-panel hidden" id="view-settings">
          <div class="content-header">
            <button id="btn-settings-back" class="btn-icon-only" data-i18n-title="back" style="margin-right: 8px;">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg>
            </button>
            <h2 class="site-title" data-i18n="settings">设置</h2>
          </div>
          <div class="settings-container">
            <div class="settings-group">
              <h3 class="settings-title" data-i18n="dataManagement">数据管理</h3>
              <div class="settings-actions">
                <button id="btn-backup" class="btn btn-outline btn-sm" data-i18n="exportBackup">导出备份</button>
                <label class="btn btn-outline btn-sm btn-file">
                  <span data-i18n="importBackup">导入备份</span>
                  <input type="file" id="input-restore-file" accept=".json" hidden />
                </label>
              </div>
            </div>
          </div>
        </section>
      </main>

      <footer class="app-footer" id="app-footer">
        <div class="security-status" id="security-status">
          <!-- Populated by JS -->
        </div>
        <!-- Bottom Ad Container -->
        <div id="ad-bottom-container" class="ad-bottom-container hidden"></div>
      </footer>
    </div>

    <!-- Custom Modal Overlay -->
    <div id="modal-overlay" class="modal-overlay hidden">
      <div class="modal-container">
        <div class="modal-header">
          <h3 id="modal-title" class="modal-title" data-i18n="modalTitleInfo">提示</h3>
        </div>
        <div class="modal-body">
          <p id="modal-message" class="modal-message"></p>
          <div id="modal-input-container" class="modal-input-container hidden">
             <input type="text" id="modal-input" class="input" />
             <p id="modal-input-error" class="modal-input-error hidden"></p>
          </div>
        </div>
        <div class="modal-footer">
          <button id="modal-btn-cancel" class="btn btn-secondary" data-i18n="cancel">取消</button>
          <button id="modal-btn-confirm" class="btn btn-primary" data-i18n="confirm">确定</button>
        </div>
      </div>
    </div>

    <!-- Feedback Modal -->
    <div id="feedback-modal-overlay" class="modal-overlay hidden">
      <div class="modal-container feedback-modal">
        <div class="modal-header">
          <h3 class="modal-title" data-i18n="feedback">意见反馈</h3>
          <button id="feedback-btn-close" class="btn-icon-only modal-close" data-i18n-title="close">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
          </button>
        </div>
        <div class="modal-body feedback-body">
          <div class="feedback-section">
            <label class="feedback-label" data-i18n="featureRequest">新功能诉求</label>
            <div class="feedback-options">
              <label class="checkbox-item">
                <input type="checkbox" name="feature" value="cloud_sync">
                <span data-i18n="featureCloudSync">增加云端同步功能</span>
              </label>
              <label class="checkbox-item">
                <input type="checkbox" name="feature" value="auto_parse">
                <span data-i18n="featureAutoParse">增加自动解析网站账号头像、昵称功能</span>
              </label>
            </div>
          </div>
          
          <div class="feedback-section">
            <label class="feedback-label" data-i18n="feedbackOther">其他建议</label>
            <div class="textarea-container">
              <textarea id="feedback-input" class="feedback-textarea" placeholder="请输入您的其他反馈..." data-i18n-placeholder="feedbackPlaceholder" maxlength="200"></textarea>
              <span id="feedback-char-count" class="char-count">0/200</span>
            </div>
          </div>

          <div id="feedback-error" class="feedback-error hidden"></div>
        </div>
        <div class="modal-footer feedback-footer">
          <button id="feedback-btn-submit" class="btn btn-primary btn-block">
            <span class="btn-text" data-i18n="submit">提交</span>
            <span class="btn-loading hidden">
              <svg class="spinner" viewBox="0 0 50 50"><circle class="path" cx="25" cy="25" r="20" fill="none" stroke-width="5"></circle></svg>
            </span>
            <span class="btn-success hidden">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>
            </span>
          </button>
        </div>
      </div>
    </div>

    <script src="popup.js"></script>
  </body>
</html>
